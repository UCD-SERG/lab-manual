A Quarto document is a plain text file with the extension `.qmd`.
It contains three important types of content:

1. An (optional) **YAML header** surrounded by `---`s
2. **Chunks** of code surrounded by ` ``` `
3. Text mixed with simple text formatting like `# heading` and `_italics_`

### Creating a New Quarto Document

In RStudio,
create a new Quarto document using **File > New File > Quarto Document...** in the menu bar.
RStudio will launch a wizard that you can use to pre-populate your file with useful content that reminds you how the key features of Quarto work.

### Visual vs. Source Editor

RStudio provides two ways to edit Quarto documents:

**Visual Editor:**
The Visual editor provides a [WYSIWYM](https://en.wikipedia.org/wiki/WYSIWYM) interface for authoring Quarto documents.
If you're new to computational documents but have experience using tools like Google Docs or MS Word,
the visual editor is the easiest way to get started.
In the visual editor you can use the buttons on the menu bar to insert images,
tables,
cross-references,
etc.,
or you can use the catch-all âŒ˜ + / or Ctrl + / shortcut to insert just about anything.

**Source Editor:**
The source editor allows you to edit the raw markdown and code.
While the visual editor will feel familiar to those with experience in word processors,
the source editor will feel familiar to those with experience writing R scripts or R Markdown documents.
The source editor can also be useful for debugging any Quarto syntax errors since it's often easier to catch these in plain text.

You can switch between the visual and source editors at any time using the toggle in the top-left of the editor pane.

### Rendering Documents

To produce a complete report containing all text,
code,
and results:

- Click **"Render"** in RStudio, or
- Press **Cmd/Ctrl + Shift + K**, or
- Use `quarto::quarto_render("document.qmd")` in R, or
- Use `quarto render document.qmd` in the terminal

When you render the document,
Quarto sends the `.qmd` file to **knitr**,
which executes all of the code chunks and creates a new markdown (`.md`) document which includes the code and its output.
The markdown file generated by knitr is then processed by **pandoc**,
which is responsible for creating the finished file in your chosen format (HTML, PDF, Word, etc.).

### Code Chunks

To run code inside a Quarto document,
you need to insert a chunk.
There are three ways to do so:

1. The keyboard shortcut **Cmd + Option + I** / **Ctrl + Alt + I**
2. The **"Insert"** button icon in the editor toolbar
3. By manually typing the chunk delimiters ` ```{r} ` and ` ``` `

Chunks can be given an optional label and various chunk options:

````markdown
```{{r}}
#| label: simple-addition
#| echo: false
1 + 1
```
````

Common chunk options include:

- `#| label:` - give the chunk a name
- `#| echo: false` - hide the code but show the output
- `#| code-fold: true` - allow readers to toggle code visibility (useful when output is more important to the narrative than the code)
- `#| eval: false` - show the code but don't run it
- `#| include: false` - run the code but hide both code and output
- `#| warning: false` - hide warnings
- `#| message: false` - hide messages

Use `code-fold: true` for chunks where the output is important to the narrative and not the code used to produce it.
This allows interested readers to expand and view the code while keeping the document focused on results.

### Format-Specific Settings

When rendering to multiple output formats (HTML, PDF, DOCX, EPUB),
you may want different chunk options or behavior for different formats.
Use `knitr::pandoc_to()` with `if ()` statements to detect the output format and set format-specific settings.

**Example: Different figure sizes for different formats**

````markdown
```{{r}}
#| label: example-plot
#| fig-width: !expr if (knitr::pandoc_to("html")) 8 else 6
#| fig-height: !expr if (knitr::pandoc_to("html")) 6 else 4

plot(1:10)
```
````

**Example: Conditional code execution based on format**

````markdown
```{{r}}
if (knitr::pandoc_to("docx")) {
  # DOCX-specific code
  knitr::kable(data, format = "simple")
} else if (knitr::pandoc_to("html")) {
  # HTML-specific code
  knitr::kable(data, format = "html")
} else {
  # PDF or other formats
  knitr::kable(data, format = "latex")
}
```
````

Common format detection patterns:

- `knitr::pandoc_to("html")` - returns `TRUE` for HTML output
- `knitr::pandoc_to("latex")` - returns `TRUE` for PDF output
- `knitr::pandoc_to("docx")` - returns `TRUE` for Word output
- `knitr::pandoc_to("epub")` - returns `TRUE` for EPUB output

This technique is particularly useful when you need to:

- Adjust figure dimensions for different page sizes
- Use different table formatting for different outputs
- Include or exclude content based on output format
- Set format-specific styling or options

### Text Formatting

Quarto uses Pandoc's markdown for text formatting:

- `*italic*` or `_italic_` produces *italic* text
- `**bold**` or `__bold__` produces **bold** text
- `` `code` `` produces `code` formatting
- `# Heading 1`, `## Heading 2`, `### Heading 3` for headings
- Bullet lists start with `-` or `*`
- Numbered lists start with `1.`, `2.`, etc.
- `[link text](url)` creates hyperlinks
- `![alt text](image.png)` inserts images

**Important:** Always include a blank line before bullet lists and numbered lists in markdown and Quarto documents.

For more details on using Quarto for writing and analysis,
see the [Quarto chapter in R for Data Science](https://r4ds.hadley.nz/quarto.html) [@wickham2023r4ds].
