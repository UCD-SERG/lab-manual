# Working with AI

[AI-powered coding assistants](https://en.wikipedia.org/wiki/AI-assisted_software_development) 
can dramatically accelerate and improve your work,
but they require careful and responsible use.
Lab members who use AI tools must adhere to the following guidelines:

## Responsibility for validation

**You are fully responsible for checking and validating all AI-generated code and content.**
AI tools can make mistakes,
generate insecure code,
produce incorrect logic,
or suggest approaches that are inappropriate for our specific research context.
Before using any AI-generated code:

- Carefully review the code to ensure you understand what it does
- Test the code thoroughly to verify it works as expected
- Verify that the logic is appropriate for your specific use case
- Check that the code follows our lab's coding standards and best practices
- Ensure the code does not introduce security vulnerabilities or data privacy issues

Never blindly copy and paste AI-generated code without understanding it.
If you don't understand what the AI has suggested,
take the time to learn or ask a colleague for help.

## Disclosure of AI use

**You must clearly state whenever you have used AI tools in your work.**
This is essential for transparency and reproducibility.
Specifically:

- In code comments, note when AI tools were used to generate or significantly modify code
- In commit messages, mention if AI tools assisted with the changes
- In manuscripts and reports, acknowledge AI tool usage in the methods or acknowledgments section
- In presentations, disclose AI assistance when relevant

Example code comment:

```
# The following function was generated with assistance from GitHub Copilot
# and has been reviewed and tested to ensure correctness
```

## Attribution of sources

**When using AI tools to generate content that borrows from or adapts existing sources,
you must ensure proper attribution.**
AI tools sometimes paraphrase or adapt content from documentation,
guides,
or other resources without clearly indicating the original source.
It is your responsibility to:

- Ask the AI tool to identify and properly cite sources when it borrows or adapts content
- Verify that any content the AI generates includes appropriate citations
- Add citations yourself if the AI fails to do so
- Follow appropriate attribution practices for the type of content (code comments, documentation, academic writing, etc.)

When instructing AI tools to create documentation or written content,
explicitly request that they provide proper attribution for any borrowed or adapted material.
For example:
"Please quote from and paraphrase [source],
with proper attribution"
rather than simply asking it to summarize information on a topic.

## Coding Agents

We recommend working with **[AI coding agents](https://github.com/features/copilot/agents)** 
to [help you code](https://en.wikipedia.org/wiki/AI-assisted_software_development).

### What are AI coding agents?

AI coding agents are [AI agents](https://en.wikipedia.org/wiki/AI_agent) specialized for coding.

### How to Work with Coding Agents

GitHub Copilot coding agents can be used in several ways to automate development tasks:

#### Assigning Issues to Copilot

You can assign GitHub Issues directly to `@copilot` just like you would assign to a human collaborator:

1. **On GitHub.com**:
   Navigate to an issue and assign it to Copilot in the assignees section
   
2. **In VS Code**:
   In the GitHub Pull Requests or Issues view,
   right-click an issue and select "Assign to Copilot"
   
3. **From Copilot Chat**:
   Delegate tasks to Copilot directly from the chat interface in supported editors

#### The Agent Workflow

Once assigned an issue,
the coding agent follows an autonomous workflow:

1. **Analysis**:
   Reviews the issue description,
   related discussions,
   repository instructions,
   and codebase context
   
2. **Planning**:
   Determines what changes are needed and creates a work plan
   
3. **Development**:
   Works in an isolated GitHub Actions environment,
   modifies code,
   runs tests and linters,
   and validates changes
   
4. **Pull Request Creation**:
   Creates a draft pull request with implemented changes,
   audit logs,
   and a summary of modifications
   
5. **Review and Iteration**:
   You review the PR and can request changes;
   the agent will iterate based on your feedback

#### Example: This Document

This very section you're reading was created through the coding agent workflow:

1. **Issue created**: [Issue #42](https://github.com/UCD-SERG/lab-manual/issues/42) requested adding discussion about benefits and hazards of coding agents,
   including a Matrix film connection and best practices
   
2. **Agent assigned**: The issue was assigned to `@copilot`

3. **Work completed**: The agent analyzed the requirements,
   reviewed the repository structure,
   and implemented the changes across multiple files

4. **Pull request**: [PR #50](https://github.com/UCD-SERG/lab-manual/pull/50) was created with comprehensive content about coding agents,
   including this "How to Work with Coding Agents" section,
   benefits and hazards discussion,
   best practices,
   and firewall configuration details

5. **Iteration**: The PR received feedback comments requesting additional links,
   improved wording,
   and this example sectionâ€”all of which the agent addressed through follow-up commits

This demonstrates the full lifecycle of working with a coding agent on a real documentation task.

#### Collaborating with Coding Agents

Between iterations of asking coding agents to extend a PR,
human collaborators can also push changes directly to the PR branch.
This allows for a collaborative workflow where both humans and agents contribute:

- **Human contributions**: You can make quick fixes,
  add content,
  or refine the agent's work by pushing commits to the same branch
  
- **Agent iterations**: After your changes,
  you can ask the agent to continue working on additional requirements

**Important**: Try to avoid pushing changes while the coding agent is actively working.
Simultaneous edits can produce conflicting diffs that:

- Need to be manually resolved
- May confuse both human and AI collaborators
- Could result in lost work or merge conflicts

**Best practice**: Wait for the agent to complete its current iteration
(indicated by the PR being updated)
before pushing your own changes to the branch.
Then assign new work to the agent for the next iteration.

#### Directly Prompting for Pull Requests

You can also prompt Copilot to create pull requests without first creating an issue:

- Use Copilot Chat in your editor to describe the changes you want
- The agent will analyze your request and create a pull request
- This is useful for quick fixes or well-defined tasks

#### Important Safeguards

- **Human approval required**:
  Coding agents cannot merge their own changes
- **Branch restrictions**:
  Agents can only push to their own branches (e.g., `copilot/*`)
- **Full transparency**:
  All agent actions are logged and visible in the PR

For detailed instructions,
see [GitHub Copilot coding agent documentation](https://docs.github.com/en/copilot/how-tos/use-copilot-agents/coding-agent).

### Benefits and Hazards

Coding agents are powerful programs that can work autonomously.
They create pull requests that propose changes to the code in our repositories,
potentially including their own configuration files and our automated workflows.
They can work powerfully on our behalf,
but they require careful oversight and control to ensure they serve our interests 
and that we understand the consequences of their actions.

Coding agents offer several advantages:

- **Built-in transparency**: 
Coding agents create a clear record of their role in your work through commit history and code suggestions

- **Context-aware suggestions**: 
Coding agents understand your codebase and can make contextually relevant suggestions

- **Integration with version control**: 
Using coding agents within GitHub ensures that AI-assisted changes are tracked alongside all other code changes

- **Interactive workflow**: 
Coding agents' interactive nature encourages you to review and modify suggestions rather than blindly accepting them

- **Accelerated development**: 
Coding agents can help you write boilerplate code, refactor existing code, and implement common patterns more quickly

- **Learning opportunities**: 
Coding agents can suggest approaches or techniques you may not have considered, helping you expand your coding knowledge

However, coding agents also come with significant hazards:

- **Over-reliance**: 
Depending too heavily on coding agents can atrophy your coding skills and understanding

- **Subtle bugs**: 
AI-generated code may contain logic errors that are not immediately obvious

- **Security vulnerabilities**: 
Coding agents may introduce insecure patterns or fail to follow security best practices

- **Inappropriate solutions**: 
AI may suggest solutions that work but are not optimal for your specific research context or constraints

- **Hidden biases**: 
Coding agents may perpetuate coding patterns or approaches that reflect biases in their training data

- **False confidence**: 
Well-formatted, professional-looking code from AI can mask underlying problems and reduce critical review

- **Workflow manipulation risks**: 
Coding agents that modify CI/CD workflows (`.github/workflows/*.yml`) or setup configurations can inadvertently or maliciously compromise repository security, expose secrets, or execute harmful commands

### Best Practices for Safe and Successful Use

To work with coding agents safely and successfully:

1. **Maintain active supervision**:
   Never assume AI-generated code is correct.
   Review every line critically.

2. **Understand before accepting**:
   If you don't understand what the code does,
   don't use it.
   Take time to learn or ask a colleague.

3. **Test thoroughly**:
   AI-generated code must be tested as rigorously as code you write yourself.
   Don't skip testing because "the AI wrote it."

4. **Start small**:
   Begin with small,
   well-defined tasks to build confidence and understanding
   of the agent's capabilities and limitations.

5. **Verify logic and assumptions**:
   Check that the AI hasn't made incorrect assumptions
   about your data,
   requirements,
   or scientific context.

6. **Review for security**:
   Explicitly check for security issues,
   especially when handling sensitive data or user input.

7. **Iterate and refine**:
   Use coding agents as a starting point,
   not an endpoint.
   Refine and improve the generated code.

8. **Maintain coding practice**:
   Regularly write code yourself to maintain and develop your skills.
   Don't let the agent do everything.

::: {.callout-warning}
## Critical: Exercise Extreme Caution with Workflow Files

Be especially careful when allowing coding agents
to edit GitHub Actions workflows or CI/CD configurations.
These files control automated processes that can:

- Access secrets and credentials
- Deploy code to production
- Execute arbitrary commands in your repository

**Never** allow a coding agent to edit workflow files
(especially `.github/workflows/*.yml` or `copilot-setup-step.yml`)
without thorough manual review.
Before approving any workflow run,
always check if the workflow files themselves have been modified.
Malicious or erroneous changes to workflows
can compromise your entire repository and its secrets.
:::

When using coding agents,
work interactively with the AI suggestions:
review,
modify,
and test them rather than accepting them wholesale.
This interactive approach helps ensure code quality
and deepens your understanding of the code.

Remember:
AI tools are assistants,
not replacements for your expertise and judgment.
The quality and correctness of your work remains your responsibility.

### Firewall and Network Configuration

Coding agents require specific network access to function properly.
If a coding agent is running behind a corporate firewall or on a restricted network,
you may need to configure allowlists to enable coding agent functionality.

#### Built-in Agent Firewall

Coding agents run in a GitHub Actions environment
with a built-in firewall that limits internet access by default.
This firewall helps protect against:

- Data exfiltration
- Accidental leaks of sensitive information
- Execution of malicious instructions

By default, the agent's firewall allows access to:

- Common OS package repositories (Debian, Ubuntu, Red Hat, etc.)
- Popular container registries (Docker Hub, Azure Container Registry, AWS ECR, etc.)
- Language-specific package registries (npm, PyPI, Maven, RubyGems, etc.)
- Common certificate authorities for SSL validation

For the complete list of allowed hosts,
see the [Copilot allowlist reference](https://docs.github.com/en/copilot/reference/copilot-allowlist-reference).

#### Customizing Agent Firewall Settings

In your repository's "Coding agent" settings page,
you can:

- Add custom hosts to the allowlist (for internal dependencies or additional registries)
- Opt out of the default recommended allowlist for stricter security
- Disable the firewall entirely (not recommended)

If a coding agent's request is blocked by the firewall,
a warning will be added to the pull request or comment,
detailing the blocked address and the command that triggered it.

For more information,
see [Customizing or disabling the firewall for GitHub Copilot coding agent](https://docs.github.com/en/copilot/how-tos/use-copilot-agents/coding-agent/customize-the-agent-firewall).

### When to use a coding agent

Coding agent sessions are currently^[2026-01-10] considered "premium requests",
which are limited resources;
see <https://github.com/features/copilot/plans> for details.
So,
use coding agents sparingly.
Use them for complex changes that would be difficult or time-consuming
for you to complete by hand.
Coding agents also take time to get configured for work,
every time you make a request.
See <https://docs.github.com/en/copilot/how-tos/use-copilot-agents/coding-agent/customize-the-agent-environment#preinstalling-tools-or-dependencies-in-copilots-environment> for ways to reduce that startup time,
but it will never be 0.
If you can complete the task faster than the coding agent can,
you should probably do it yourself.

Also,
the less we practice,
the weaker our skills get,
and the harder it is for us to supervise the agents
and make sure they are actually doing what we want it to do,
the way we want it to do it.
You should exercise your own coding skills regularly,
just like you would for any other skill you want to maintain.

### Editing with `.docx` files

GitHub Copilot coding agents can read Microsoft Word (`.docx`) files, including tracked changes and comments.
This enables a hybrid editing workflow where:

1. Lab members can export Quarto content to Word format for review
2. Reviewers can make edits, add tracked changes, and insert comments in Word
3. Coding agents can read the `.docx` file and translate the edits back to Quarto format

When using this workflow, make sure to explicitly instruct the coding agent to:

- Examine and apply all tracked changes in the `.docx` file
- Read and address all comments in the `.docx` file
- Translate edits from Word formatting to appropriate Quarto/markdown syntax

This approach makes it easier for collaborators who are more comfortable with Word to contribute to the lab manual while maintaining the source files in Quarto format.

## Further reading/viewing

- *I Robot* [@i_robot]
- *Dune* [@butlerian_jihad]
- @space_odyssey
- @terminator
- @matrix
- @blade_runner
- @wargames
- *Ender's Game* [@enders_game]
- "The Humans are Dead" [@humans_are_dead]

![[Agents](https://en.wikipedia.org/wiki/Agent_(The_Matrix))](assets/images/matrix-agents.png){fig-alt="Three agents in suits and sunglasses from the Matrix films"}

