Here's the typical workflow for developing an R package in our lab:

### 1. Initial Setup

**Starting from a template (recommended):**

Using our R package template is the fastest way to get started with a new R package,
as it provides pre-configured settings,
GitHub Actions workflows,
and development tools:

- **UCD-SeRG R Package Template** - Our recommended template with pre-configured development tools and CI workflows:
  - Repository: <https://github.com/UCD-SERG/r.package.template>
  - Click "Use this template" â†’ "Create a new repository" on GitHub
  - Clone your new repository and start developing

The template includes pre-configured:

- GitHub Actions workflows for R CMD check,
test coverage,
and pkgdown deployment
- Development tools setup (<a href="https://usethis.r-lib.org/">`{usethis}`</a>,
<a href="https://devtools.r-lib.org/">`{devtools}`</a>,
<a href="https://roxygen2.r-lib.org/">`{roxygen2}`</a>)
- Testing infrastructure (<a href="https://testthat.r-lib.org/">`{testthat}`</a>)
- Code styling and linting configurations
- Package documentation structure

While the template jumpstarts your project with up-to-date configuration and workflow files,
you should still come up to speed on what all the config files do so you can modify and debug them as needed.
The template serves as a central location for the most current versions of these files and best practices.

**Starting from scratch:**

If you prefer to start from scratch or need to understand each setup step,
you can create a new package manually:

```r
# Create package structure
usethis::create_package("~/myproject")

# Set up infrastructure
usethis::use_git()
usethis::use_github()
usethis::use_testthat()
usethis::use_pkgdown()
usethis::use_mit_license()
usethis::use_readme_rmd()
```

### 2. Add Dependencies

```r
# Add packages your project depends on
usethis::use_package("dplyr")
usethis::use_package("ggplot2")
usethis::use_package("readr")

# Add packages only needed for development/testing
usethis::use_package("testthat", type = "Suggests")
```

### 3. Write Functions

Create functions in `R/` directory with roxygen2 documentation:

```r
#' Prepare Study Data
#'
#' Clean and prepare raw study data for analysis.
#'
#' @param raw_data A data frame containing raw study data
#' @param validate Logical; whether to run validation checks
#'
#' @returns A cleaned data frame ready for analysis
#'
#' @examples
#' raw_data <- read_csv("data.csv")
#' clean_data <- prep_study_data(raw_data)
#'
#' @export
prep_study_data <- function(raw_data, validate = TRUE) {
  # Function implementation
}
```

### 4. Document

```r
# Generate documentation from roxygen2 comments
devtools::document()
```

### 5. Test

Create tests in `tests/testthat/`:

```r
# tests/testthat/test-data_prep.R
test_that("prep_study_data handles missing values", {
  raw_data <- data.frame(x = c(1, NA, 3))
  result <- prep_study_data(raw_data)
  expect_false(anyNA(result$x))
})
```

Run tests:

```r
devtools::test()
```

### 6. Check

```r
# Comprehensive package check
devtools::check()
```

Fix any warnings or errors before proceeding.

### 7. Build Documentation Site

```r
pkgdown::build_site()
```

### 8. Share and Publish

```r
# Push to GitHub
# The pkgdown site can be automatically deployed to GitHub Pages
# using GitHub Actions
```
```
