### Understanding GitHub Actions

[GitHub Actions](https://github.com/features/actions) is GitHub's built-in automation platform that makes it easy to automate software workflows,
including continuous integration and deployment (CI/CD).
For R packages,
this means you can automatically test your code,
check for errors,
and deploy documentation every time you push changes to GitHub.

**Key benefits of GitHub Actions:**

- **Automated testing**: Run `R CMD check` across multiple operating systems (Linux, macOS, Windows) and R versions
- **Immediate feedback**: Get notified of problems quickly, when they're easier to fix
- **Better collaboration**: External contributors can see if their changes pass all checks before you review
- **Quality assurance**: Catch platform-specific issues before they reach users
- **Documentation deployment**: Automatically build and deploy your pkgdown website

Even for solo developers,
having automated checks run on different platforms helps avoid the "works on my machine" problem.

### Setting Up GitHub Actions

The easiest way to add GitHub Actions to your R package is using <a href="https://usethis.r-lib.org/">`{usethis}`</a>.
The tidyverse team maintains a collection of ready-to-use workflows at [r-lib/actions](https://github.com/r-lib/actions) that handle common R package tasks.

#### Essential Workflows

**1. R CMD check (most important):**

```r
usethis::use_github_action("check-standard")
```

This runs `R CMD check` on Linux, macOS, and Windows to ensure your package works across platforms.
If you only set up one workflow, make it this one.

**2. Test coverage:**

```r
usethis::use_github_action("test-coverage")
```

Calculates what percentage of your code is covered by tests and reports to [codecov.io](https://about.codecov.io).

**3. Package website:**

```r
usethis::use_github_action("pkgdown")
```

Automatically builds and deploys your pkgdown documentation site to GitHub Pages.

#### Interactive Setup

Running `usethis::use_github_action()` without arguments shows a menu of recommended workflows:

```r
usethis::use_github_action()
#> Which action do you want to add? (0 to exit)
#> (See <https://github.com/r-lib/actions/tree/v2/examples> for other options)
#>
#> 1: check-standard: Run `R CMD check` on Linux, macOS, and Windows
#> 2: test-coverage: Compute test coverage and report to https://about.codecov.io
#> 3: pr-commands: Add /document and /style commands for pull requests
```

### How GitHub Actions Workflows Work

When you set up a workflow,
`usethis` creates a YAML configuration file in `.github/workflows/`.
For example,
`check-standard` creates `.github/workflows/R-CMD-check.yaml`.

This workflow automatically runs when you:

- Push commits to `main` or `master`
- Open or update a pull request

You can view workflow results in the "Actions" tab of your GitHub repository.
A status badge is added to your README showing whether checks are passing.

### Workflow Files and Security

::: {.callout-warning}
**Important Security Consideration**

Workflow files (`.github/workflows/*.yaml`) have access to repository secrets and can execute code.
Always review workflow files carefully before committing them,
especially if copied from external sources.

See @sec-ai-best-practices for guidance on working with workflow files using AI tools.
:::

The workflow YAML files in `.github/workflows/` are configuration files that tell GitHub Actions:

- When to run (on push, pull request, schedule, etc.)
- What operating systems and R versions to use
- What steps to execute (install dependencies, run checks, etc.)

### Troubleshooting Failed Workflows

When workflows fail,
check the "Actions" tab in your GitHub repository for detailed logs.
Common issues include:

- **Test failures**: Your tests found a bug (this is good! fix the bug)
- **Platform-specific issues**: Code works on your machine but not on other platforms
- **Missing dependencies**: System libraries needed for packages aren't installed
- **Linting errors**: Code style issues detected by automated checks

For help addressing workflow failures,
see @sec-ai-addressing-failing-workflows.

### Pull Request Comment Automation {#sec-pr-comment-automation}

{{< include coding-practices/pull-request-comment-automation.qmd >}}

### Additional Resources

- [GitHub Actions features overview](https://github.com/features/actions)
- [r-lib/actions repository](https://github.com/r-lib/actions) - R-specific actions and example workflows
- [R Packages book: Continuous Integration](https://r-pkgs.org/software-development-practices.html#sec-sw-dev-practices-ci)
- [GitHub Actions documentation](https://docs.github.com/en/actions)
- [Where to find help with r-lib/actions](https://github.com/r-lib/actions#where-to-find-help)
